<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Mantenedor</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="page-background">

  <div id="container">
    <!-- Sección Usuarios -->
    <ion-card class="mantenedor">
      <ion-card-header>
        <ion-card-title>Usuarios TeLlevoApp</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>

          <!-- Botón para agregar un usuario -->
          <ion-item>
            <ion-button (click)="mostrarFormulario()" class="btn-formulario">
              Agregar nuevo Usuario
            </ion-button>
          </ion-item>
          
          <!-- Formulario para agregar un usuario -->
          <ion-card *ngIf="isFormularioVisible">
            <ion-card-header>
              <ion-card-title>Agregar Usuario</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ion-item>
                <ion-label position="floating">Nombre Usuario</ion-label>
                <ion-input [(ngModel)]="nuevoUsuario.username"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Correo Usuario</ion-label>
                <ion-input type="email" [(ngModel)]="nuevoUsuario.email"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Contraseña Usuario</ion-label>
                <ion-input type="password" [(ngModel)]="nuevoUsuario.password"></ion-input>
              </ion-item>
              <div class="button-group">
                <ion-button class="btn-formulario" (click)="agregarUsuario()">
                  Guardar Usuario
                </ion-button>
                <ion-button color="danger" (click)="cancelarAgregarUsuario()">
                  Cancelar
                </ion-button>
              </div>
            </ion-card-content>
          </ion-card>

          <!-- Lista de Usuarios -->
          <ion-grid fixed>
            <ion-row *ngFor="let user of users">
              <ion-col>
                <div><ion-label class="txt-credenciales">Usuario: </ion-label>{{user.username}}</div>
                <div><ion-label class="txt-credenciales">Email: </ion-label>{{user.email}}</div>
                <div><ion-label class="txt-credenciales">Contraseña: </ion-label>{{user.password}}</div>
                <div>
                  <ion-button class="btn-mini" (click)="modificarUsuario(user)">
                    Modificar
                  </ion-button>
                  <ion-button class="btn-mini" (click)="eliminarUsuario(user.id)">
                    Eliminar
                  </ion-button>
                </div>
              </ion-col>
            </ion-row>
            <ion-spinner *ngIf="users.length === 0"></ion-spinner>
          </ion-grid>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Sección Viajes -->
    <ion-card class="mantenedor">
      <ion-card-header>
        <ion-card-title>Viajes Disponibles</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <!-- Lista de Viajes -->
          <ion-grid fixed>
            <ion-row *ngFor="let viaje of viajes">
              <ion-col>
                <div><ion-label class="txt-credenciales">Destino: </ion-label>{{viaje.destino}}</div>
                <div><ion-label class="txt-credenciales">Capacidad: </ion-label>{{viaje.capacidad}}</div>
                <div><ion-label class="txt-credenciales">Hora: </ion-label>{{viaje.horario}}</div>
                <div><ion-label class="txt-credenciales">Precio: </ion-label>${{viaje.precio}}</div>                
                <div>
                  <ion-button color="danger" (click)="eliminarViaje(viaje.id)">
                    Eliminar
                  </ion-button>
                </div>
              </ion-col>
            </ion-row>
            <ion-spinner *ngIf="viajes.length === 0"></ion-spinner>
          </ion-grid>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>

  <ion-button (click)="atras()" class="back-button">Atrás</ion-button>
</ion-content>
